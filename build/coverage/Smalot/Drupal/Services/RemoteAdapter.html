<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
	<head>
		<meta http-equiv="Content-Language" content="en" />
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<title>SmalotDrupal : code coverage of Smalot\Drupal\Services\RemoteAdapter</title>
		<link rel="stylesheet" media="screen" type="text/css" href="../../../screen.css" title="Screen" />
	</head>
	<body>
		<div id="header">
			<h1>Code coverage of <a href="../../../">SmalotDrupal</a>: Smalot\Drupal\Services\RemoteAdapter</h1>
			<h2>Class code coverage <span>42.22%</span></h2>
		</div>
		<div id="page">
			<div id="content">
				<h3>Methods</h3>
				<ul class="summary">
					
						
							<li>
								
								
									<div class="bar">
										<div class="background"></div>
										<div class="graph" style="width: 100%"></div>
										<div class="label"><a href="#__construct">__construct</a> <span>100%</span></div>
									</div>
								
							</li>
						
							<li>
								
								
									<div class="bar">
										<div class="background"></div>
										<div class="graph" style="width: 100%"></div>
										<div class="label"><a href="#__destruct">__destruct</a> <span>100%</span></div>
									</div>
								
							</li>
						
							<li>
								
								
									<div class="bar">
										<div class="background"></div>
										<div class="graph" style="width: 100%"></div>
										<div class="label"><a href="#login">login</a> <span>100%</span></div>
									</div>
								
							</li>
						
							<li>
								
								
									<div class="bar">
										<div class="background"></div>
										<div class="graph" style="width: 100%"></div>
										<div class="label"><a href="#logout">logout</a> <span>100%</span></div>
									</div>
								
							</li>
						
							<li>
								
								
									<div class="bar">
										<div class="background"></div>
										<div class="graph" style="width: 100%"></div>
										<div class="label"><a href="#checkSecurity">checkSecurity</a> <span>100%</span></div>
									</div>
								
							</li>
						
							<li>
								
								
									<div class="bar">
										<div class="background"></div>
										<div class="graph" style="width: 100%"></div>
										<div class="label"><a href="#call">call</a> <span>100%</span></div>
									</div>
								
							</li>
						
							<li>
								
								
									<div class="bar">
										<div class="background"></div>
										<div class="graph" style="width: 0%"></div>
										<div class="label"><a href="#multiCall">multiCall</a> <span>0%</span></div>
									</div>
								
							</li>
						
							<li>
								
								
									<div class="bar">
										<div class="background"></div>
										<div class="graph" style="width: 0%"></div>
										<div class="label"><a href="#getActions">getActions</a> <span>0%</span></div>
									</div>
								
							</li>
						
							<li>
								
								
									<div class="bar">
										<div class="background"></div>
										<div class="graph" style="width: 0%"></div>
										<div class="label"><a href="#handleCallbacks">handleCallbacks</a> <span>0%</span></div>
									</div>
								
							</li>
						
					
				</ul>
				<h3>Source</h3>
				<table cellpadding="0" cellspacing="0" class="source">
					<tr><th class="number">Line</th><th>Code</th></tr>
					<tr><td class="number">1</td><td><pre>&lt;?php
</pre></td></tr><tr><td class="number">2</td><td><pre>
</pre></td></tr><tr><td class="number">3</td><td><pre>namespace Smalot\Drupal\Services;
</pre></td></tr><tr><td class="number">4</td><td><pre>
</pre></td></tr><tr><td class="number">5</td><td><pre>use Smalot\Drupal\Services\Security\SecurityInterface;
</pre></td></tr><tr><td class="number">6</td><td><pre>use Smalot\Drupal\Services\Transport\Request;
</pre></td></tr><tr><td class="number">7</td><td><pre>use Smalot\Drupal\Services\Transport\TransportInterface;
</pre></td></tr><tr><td class="number">8</td><td><pre>
</pre></td></tr><tr><td class="number">9</td><td><pre>/**
</pre></td></tr><tr><td class="number">10</td><td><pre> * Class RemoteAdapter
</pre></td></tr><tr><td class="number">11</td><td><pre> *
</pre></td></tr><tr><td class="number">12</td><td><pre> * @package Smalot\Drupal\Services
</pre></td></tr><tr><td class="number">13</td><td><pre> */
</pre></td></tr><tr><td class="number">14</td><td><pre>class RemoteAdapter implements RemoteAdapterInterface
</pre></td></tr><tr><td class="number">15</td><td><pre>{
</pre></td></tr><tr><td class="number">16</td><td><pre>    /**
</pre></td></tr><tr><td class="number">17</td><td><pre>     * @var SecurityInterface
</pre></td></tr><tr><td class="number">18</td><td><pre>     */
</pre></td></tr><tr><td class="number">19</td><td><pre>    protected $security;
</pre></td></tr><tr><td class="number">20</td><td><pre>
</pre></td></tr><tr><td class="number">21</td><td><pre>    /**
</pre></td></tr><tr><td class="number">22</td><td><pre>     * @var TransportInterface
</pre></td></tr><tr><td class="number">23</td><td><pre>     */
</pre></td></tr><tr><td class="number">24</td><td><pre>    protected $transport;
</pre></td></tr><tr><td class="number">25</td><td><pre>
</pre></td></tr><tr><td class="number">26</td><td><pre>    /**
</pre></td></tr><tr><td class="number">27</td><td><pre>     * @param SecurityInterface  $security
</pre></td></tr><tr><td class="number">28</td><td><pre>     * @param TransportInterface $transport
</pre></td></tr><tr><td class="number">29</td><td><pre>     */
</pre></td></tr><tr><td class="number"><a name="__construct"></a>30</td><td><pre>    public function __construct(SecurityInterface $security, TransportInterface $transport)
</pre></td></tr><tr><td class="number"><a name="__construct"></a>31</td><td><pre>    {
</pre></td></tr><tr class="covered"><td class="number">32</td><td><pre>        $this-&gt;security  = $security;
</pre></td></tr><tr class="covered"><td class="number">33</td><td><pre>        $this-&gt;transport = $transport;
</pre></td></tr><tr class="covered"><td class="number">34</td><td><pre>    }
</pre></td></tr><tr><td class="number"><a name="__construct"></a>35</td><td><pre>
</pre></td></tr><tr><td class="number"><a name="__construct"></a>36</td><td><pre>    /**
</pre></td></tr><tr><td class="number"><a name="__construct"></a>37</td><td><pre>     *
</pre></td></tr><tr><td class="number"><a name="__construct"></a>38</td><td><pre>     */
</pre></td></tr><tr><td class="number"><a name="__destruct"></a>39</td><td><pre>    public function __destruct()
</pre></td></tr><tr><td class="number"><a name="__destruct"></a>40</td><td><pre>    {
</pre></td></tr><tr class="covered"><td class="number">41</td><td><pre>        $this-&gt;logout();
</pre></td></tr><tr class="covered"><td class="number">42</td><td><pre>    }
</pre></td></tr><tr><td class="number"><a name="__destruct"></a>43</td><td><pre>
</pre></td></tr><tr><td class="number"><a name="__destruct"></a>44</td><td><pre>    /**
</pre></td></tr><tr><td class="number"><a name="__destruct"></a>45</td><td><pre>     * @return bool
</pre></td></tr><tr><td class="number"><a name="__destruct"></a>46</td><td><pre>     * @throws \Exception
</pre></td></tr><tr><td class="number"><a name="__destruct"></a>47</td><td><pre>     */
</pre></td></tr><tr><td class="number"><a name="login"></a>48</td><td><pre>    public function login()
</pre></td></tr><tr><td class="number"><a name="login"></a>49</td><td><pre>    {
</pre></td></tr><tr class="covered"><td class="number">50</td><td><pre>        return $this-&gt;security-&gt;login($this-&gt;transport);
</pre></td></tr><tr><td class="number"><a name="login"></a>51</td><td><pre>    }
</pre></td></tr><tr><td class="number"><a name="login"></a>52</td><td><pre>
</pre></td></tr><tr><td class="number"><a name="login"></a>53</td><td><pre>    /**
</pre></td></tr><tr><td class="number"><a name="login"></a>54</td><td><pre>     * @return bool
</pre></td></tr><tr><td class="number"><a name="login"></a>55</td><td><pre>     */
</pre></td></tr><tr><td class="number"><a name="logout"></a>56</td><td><pre>    public function logout()
</pre></td></tr><tr><td class="number"><a name="logout"></a>57</td><td><pre>    {
</pre></td></tr><tr class="covered"><td class="number">58</td><td><pre>        return $this-&gt;security-&gt;logout($this-&gt;transport);
</pre></td></tr><tr><td class="number"><a name="logout"></a>59</td><td><pre>    }
</pre></td></tr><tr><td class="number"><a name="logout"></a>60</td><td><pre>
</pre></td></tr><tr><td class="number"><a name="logout"></a>61</td><td><pre>    /**
</pre></td></tr><tr><td class="number"><a name="logout"></a>62</td><td><pre>     * @throws RemoteAdapterException
</pre></td></tr><tr><td class="number"><a name="logout"></a>63</td><td><pre>     */
</pre></td></tr><tr><td class="number"><a name="checkSecurity"></a>64</td><td><pre>    protected function checkSecurity()
</pre></td></tr><tr><td class="number"><a name="checkSecurity"></a>65</td><td><pre>    {
</pre></td></tr><tr class="covered"><td class="number">66</td><td><pre>        if (!$this-&gt;security-&gt;isLogged()) {
</pre></td></tr><tr class="covered"><td class="number">67</td><td><pre>            $this-&gt;login();
</pre></td></tr><tr class="covered"><td class="number">68</td><td><pre>        }
</pre></td></tr><tr class="covered"><td class="number">69</td><td><pre>    }
</pre></td></tr><tr><td class="number"><a name="checkSecurity"></a>70</td><td><pre>
</pre></td></tr><tr><td class="number"><a name="checkSecurity"></a>71</td><td><pre>    /**
</pre></td></tr><tr><td class="number"><a name="checkSecurity"></a>72</td><td><pre>     * @param ActionInterface $action
</pre></td></tr><tr><td class="number"><a name="checkSecurity"></a>73</td><td><pre>     * @param bool            $throwsException
</pre></td></tr><tr><td class="number"><a name="checkSecurity"></a>74</td><td><pre>     *
</pre></td></tr><tr><td class="number"><a name="checkSecurity"></a>75</td><td><pre>     * @return array|false
</pre></td></tr><tr><td class="number"><a name="checkSecurity"></a>76</td><td><pre>     * @throws \Exception
</pre></td></tr><tr><td class="number"><a name="checkSecurity"></a>77</td><td><pre>     */
</pre></td></tr><tr><td class="number"><a name="call"></a>78</td><td><pre>    public function call(ActionInterface $action, $throwsException = true)
</pre></td></tr><tr><td class="number"><a name="call"></a>79</td><td><pre>    {
</pre></td></tr><tr><td class="number"><a name="call"></a>80</td><td><pre>        try {
</pre></td></tr><tr class="covered"><td class="number">81</td><td><pre>            $this-&gt;checkSecurity();
</pre></td></tr><tr><td class="number"><a name="call"></a>82</td><td><pre>
</pre></td></tr><tr class="covered"><td class="number">83</td><td><pre>            $request  = new Request($action, $this-&gt;security);
</pre></td></tr><tr class="covered"><td class="number">84</td><td><pre>            $response = $this-&gt;transport-&gt;call($request);
</pre></td></tr><tr><td class="number"><a name="call"></a>85</td><td><pre>
</pre></td></tr><tr class="covered"><td class="number">86</td><td><pre>            return $response;
</pre></td></tr><tr><td class="number"><a name="call"></a>87</td><td><pre>
</pre></td></tr><tr class="covered"><td class="number">88</td><td><pre>        } catch (\Exception $e) {
</pre></td></tr><tr class="covered"><td class="number">89</td><td><pre>            if ($throwsException) {
</pre></td></tr><tr class="covered"><td class="number">90</td><td><pre>                throw $e;
</pre></td></tr><tr><td class="number"><a name="call"></a>91</td><td><pre>            }
</pre></td></tr><tr><td class="number"><a name="call"></a>92</td><td><pre>
</pre></td></tr><tr class="covered"><td class="number">93</td><td><pre>            return false;
</pre></td></tr><tr><td class="number"><a name="call"></a>94</td><td><pre>        }
</pre></td></tr><tr><td class="number"><a name="call"></a>95</td><td><pre>    }
</pre></td></tr><tr><td class="number"><a name="call"></a>96</td><td><pre>
</pre></td></tr><tr><td class="number"><a name="call"></a>97</td><td><pre>    /**
</pre></td></tr><tr><td class="number"><a name="call"></a>98</td><td><pre>     * @param MultiCallQueueInterface $queue
</pre></td></tr><tr><td class="number"><a name="call"></a>99</td><td><pre>     * @param bool                    $throwsException
</pre></td></tr><tr><td class="number"><a name="call"></a>100</td><td><pre>     *
</pre></td></tr><tr><td class="number"><a name="call"></a>101</td><td><pre>     * @return array|false
</pre></td></tr><tr><td class="number"><a name="call"></a>102</td><td><pre>     * @throws \Exception
</pre></td></tr><tr><td class="number"><a name="call"></a>103</td><td><pre>     */
</pre></td></tr><tr><td class="number"><a name="multiCall"></a>104</td><td><pre>    public function multiCall(MultiCallQueueInterface $queue, $throwsException = true)
</pre></td></tr><tr><td class="number"><a name="multiCall"></a>105</td><td><pre>    {
</pre></td></tr><tr><td class="number"><a name="multiCall"></a>106</td><td><pre>        try {
</pre></td></tr><tr class="notCovered"><td class="number">107</td><td><pre>            $this-&gt;checkSecurity();
</pre></td></tr><tr><td class="number"><a name="multiCall"></a>108</td><td><pre>
</pre></td></tr><tr class="notCovered"><td class="number">109</td><td><pre>            $actions  = $this-&gt;getActions($queue);
</pre></td></tr><tr class="notCovered"><td class="number">110</td><td><pre>            $action   = new Action(&#039;system&#039;, &#039;multicall&#039;, array(), $actions);
</pre></td></tr><tr class="notCovered"><td class="number">111</td><td><pre>            $request  = new Request($action, $this-&gt;security);
</pre></td></tr><tr class="notCovered"><td class="number">112</td><td><pre>            $response = $this-&gt;transport-&gt;multiCall($request);
</pre></td></tr><tr><td class="number"><a name="multiCall"></a>113</td><td><pre>
</pre></td></tr><tr class="notCovered"><td class="number">114</td><td><pre>            $this-&gt;handleCallbacks($queue, $response);
</pre></td></tr><tr><td class="number"><a name="multiCall"></a>115</td><td><pre>
</pre></td></tr><tr class="notCovered"><td class="number">116</td><td><pre>            return $response;
</pre></td></tr><tr><td class="number"><a name="multiCall"></a>117</td><td><pre>
</pre></td></tr><tr class="notCovered"><td class="number">118</td><td><pre>        } catch (\Exception $e) {
</pre></td></tr><tr class="notCovered"><td class="number">119</td><td><pre>            if ($throwsException) {
</pre></td></tr><tr class="notCovered"><td class="number">120</td><td><pre>                throw $e;
</pre></td></tr><tr><td class="number"><a name="multiCall"></a>121</td><td><pre>            }
</pre></td></tr><tr><td class="number"><a name="multiCall"></a>122</td><td><pre>
</pre></td></tr><tr class="notCovered"><td class="number">123</td><td><pre>            return false;
</pre></td></tr><tr><td class="number"><a name="multiCall"></a>124</td><td><pre>        }
</pre></td></tr><tr><td class="number"><a name="multiCall"></a>125</td><td><pre>    }
</pre></td></tr><tr><td class="number"><a name="multiCall"></a>126</td><td><pre>
</pre></td></tr><tr><td class="number"><a name="multiCall"></a>127</td><td><pre>    /**
</pre></td></tr><tr><td class="number"><a name="multiCall"></a>128</td><td><pre>     * @param MultiCallQueueInterface $queue
</pre></td></tr><tr><td class="number"><a name="multiCall"></a>129</td><td><pre>     *
</pre></td></tr><tr><td class="number"><a name="multiCall"></a>130</td><td><pre>     * @return array
</pre></td></tr><tr><td class="number"><a name="multiCall"></a>131</td><td><pre>     */
</pre></td></tr><tr><td class="number"><a name="getActions"></a>132</td><td><pre>    protected function getActions(MultiCallQueueInterface $queue)
</pre></td></tr><tr><td class="number"><a name="getActions"></a>133</td><td><pre>    {
</pre></td></tr><tr class="notCovered"><td class="number">134</td><td><pre>        $actions = array();
</pre></td></tr><tr><td class="number"><a name="getActions"></a>135</td><td><pre>
</pre></td></tr><tr class="notCovered"><td class="number">136</td><td><pre>        foreach ($queue as $item) {
</pre></td></tr><tr class="notCovered"><td class="number">137</td><td><pre>            $action = $item[&#039;action&#039;];
</pre></td></tr><tr><td class="number"><a name="getActions"></a>138</td><td><pre>
</pre></td></tr><tr><td class="number"><a name="getActions"></a>139</td><td><pre>            /** @var $action ActionInterface */
</pre></td></tr><tr class="notCovered"><td class="number">140</td><td><pre>            $actions[] = array(
</pre></td></tr><tr class="notCovered"><td class="number">141</td><td><pre>              $action-&gt;getMethod(),
</pre></td></tr><tr class="notCovered"><td class="number">142</td><td><pre>              $action-&gt;getArguments(),
</pre></td></tr><tr><td class="number"><a name="getActions"></a>143</td><td><pre>            );
</pre></td></tr><tr class="notCovered"><td class="number">144</td><td><pre>        }
</pre></td></tr><tr><td class="number"><a name="getActions"></a>145</td><td><pre>
</pre></td></tr><tr class="notCovered"><td class="number">146</td><td><pre>        return $actions;
</pre></td></tr><tr><td class="number"><a name="getActions"></a>147</td><td><pre>    }
</pre></td></tr><tr><td class="number"><a name="getActions"></a>148</td><td><pre>
</pre></td></tr><tr><td class="number"><a name="getActions"></a>149</td><td><pre>    /**
</pre></td></tr><tr><td class="number"><a name="getActions"></a>150</td><td><pre>     * @param MultiCallQueueInterface $queue
</pre></td></tr><tr><td class="number"><a name="getActions"></a>151</td><td><pre>     * @param array                   $results
</pre></td></tr><tr><td class="number"><a name="getActions"></a>152</td><td><pre>     */
</pre></td></tr><tr><td class="number"><a name="handleCallbacks"></a>153</td><td><pre>    protected function handleCallbacks(MultiCallQueueInterface $queue, $results)
</pre></td></tr><tr><td class="number"><a name="handleCallbacks"></a>154</td><td><pre>    {
</pre></td></tr><tr class="notCovered"><td class="number">155</td><td><pre>        foreach ($queue as $position =&gt; $item) {
</pre></td></tr><tr class="notCovered"><td class="number">156</td><td><pre>            $callback = $item[&#039;callback&#039;];
</pre></td></tr><tr><td class="number"><a name="handleCallbacks"></a>157</td><td><pre>
</pre></td></tr><tr class="notCovered"><td class="number">158</td><td><pre>            if (is_callable($callback)) {
</pre></td></tr><tr class="notCovered"><td class="number">159</td><td><pre>                call_user_func($callback, $results[$position]);
</pre></td></tr><tr class="notCovered"><td class="number">160</td><td><pre>            }
</pre></td></tr><tr class="notCovered"><td class="number">161</td><td><pre>        }
</pre></td></tr><tr class="notCovered"><td class="number">162</td><td><pre>    }
</pre></td></tr><tr><td class="number"><a name="handleCallbacks"></a>163</td><td><pre>}
</pre></td></tr>
				</table>
			</div>
		</div>
		<div id="footer">
			<p>Code coverage report powered by <a href="http://atoum.org">atoum</a></p>
		</div>
	</body>
</html>
